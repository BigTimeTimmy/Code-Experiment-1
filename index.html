<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>The Three Little Pigs (Ink Story)</title>

  <!-- InkJS -->
  <script src="https://cdn.jsdelivr.net/npm/inkjs@1.11.1/dist/ink.js"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #eee;
      max-width: 800px;
      margin: auto;
      padding: 20px;
    }
    button {
      display: block;
      margin: 10px 0;
      padding: 10px;
      font-size: 16px;
      background: #444;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background: #666;
    }
  </style>
</head>

<body>
  <h1>The Three Little Pigs</h1>
  <div id="story"></div>

  <script>
    const inkSource = `
Once upon a time...
there were three little pigs.

- They lived happily ever after.
-> Brickhouse

=== Brickhouse

The three little pigs, Porky, Bacon, and HogMog, lived in a brick house in the middle of the woods. They had just finished dinner and were about to take a bath after a long day of work fixing all of the holes around the house.

But, suddenly, "BANG!" A loud noise came from the kitchen. Porky and Bacon are scared and don't want to check the noise.

HogMog tells both of them that all three of them need to go and find out what makes that noise.

Porky and Bacon decide to...

+[Go to Kitchen]
-> Kitchen

+[Go to Bedroom]
-> Bedroom

=== Kitchen

The three little pigs enter the kitchen, and the kitchen lights are all turned off. They begin shaking in fear.

Once again, a loud "BANG!" occurs, this time coming from the garbage can.

Another loud "BANG!" happens again.

+[Check out the noise]

HogMog grabs the garbage can.

A mouse jumps out.

It introduces itself as Stuart Little.

They laugh, warm up Pizza Rolls, and become neighbors.

-> END

=== Bedroom

Both Bacon and Porky head upstairs and go to bed.

A loud scream comes from the kitchen.

+[Lock the door]
-> Bedroom1

+[Head straight to the kitchen]
-> Kitchen1

=== Bedroom1

BANG! BANG! BANG!

The door is knocked down.

It is HogMog â€” holding a mouse.

The mouse introduces himself as Stuart Little.

They eat Pizza Rolls together.

-> END

=== Kitchen1

They run into the dark kitchen.

They bump into HogMog.

He explains the noise was a mouse.

The mouse introduces himself as Stuart Little.

They warm up Pizza Rolls and become neighbors.

-> END
`;

    const compiler = new inkjs.Compiler(inkSource);
    const story = compiler.Compile();

    const container = document.getElementById("story");

    function render() {
      container.innerHTML = "";

      while (story.canContinue) {
        const p = document.createElement("p");
        p.textContent = story.Continue();
        container.appendChild(p);
      }

      story.currentChoices.forEach(choice => {
        const button = document.createElement("button");
        button.textContent = choice.text;
        button.onclick = () => {
          story.ChooseChoiceIndex(choice.index);
          render();
        };
        container.appendChild(button);
      });
    }

    render();
  </script>
</body>
</html>
